{
    "version": "7.4.8-0",
    "description": "Apache distribution containing MariaDB, PHP, and Perl",
    "homepage": "https://www.apachefriends.org/index.html",
    "license": "GPL-2.0-only",
    "notes": "Run XAMPP Control Panel with admin rights to avoid access errors.",
    "depends": "sudo",
    "suggest": {
        "Visual C++ 2019 Redistributable": "extras/vcredist2019"
    },
    "architecture": {
        "64bit": {
            "url": "https://downloads.sourceforge.net/project/xampp/XAMPP%20Windows/7.4.8/xampp-windows-x64-7.4.8-0-VC15-installer.exe#/setup.exe",
            "hash": "sha1:9c12a89fea0bd3b82f16b2db57f7e6de26dacf12"
        }
    },
    "installer": {
        "script": [
            "Invoke-ExternalCommand \"$dir\\setup.exe\" -ArgumentList @('--mode', 'unattended', '--launchapps', '0') -RunAs | Out-Null",
            "Remove-Item \"$dir\\setup.exe\"",
            "if (Test-Path $persist_dir) { sudo Copy-Item -Path \"$persist_dir\\*\" -Destination \"C:\\xampp\" -Force -Recurse }"
        ]
    },
    "uninstaller": {
        "script": [
            "$persist_files = @('apache\\conf', 'apache\\logs', 'htdocs', 'mysql\\data', 'php\\php.ini', 'sendmail\\sendmail.ini', 'tomcat\\conf', 'tomcat\\logs', 'xampp-control.ini')",
            "$persist_files | ForEach-Object {",
            "    ensure \"$persist_dir\\$_\\..\" | Out-Null",
            "    Copy-Item -Path \"C:\\xampp\\$_\" -Destination \"$persist_dir\\$_\" -Force -Recurse",
            "}",
            "Invoke-ExternalCommand \"C:\\xampp\\uninstall.exe\" -ArgumentList @('--mode', 'unattended') -RunAs | Out-Null"
        ]
    },
    "checkver": "xampp-windows-x64-([\\d.-]+)-VC(?<vc>\\d+)-installer\\.exe",
    "autoupdate": {
        "architecture": {
            "64bit": {
                "url": "https://downloads.sourceforge.net/project/xampp/XAMPP%20Windows/$matchHead/xampp-windows-x64-$version-VC$matchVc-installer.exe#/setup.exe"
            }
        }
    }
}
